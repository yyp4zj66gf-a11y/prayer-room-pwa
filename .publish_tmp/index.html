<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>PrayerSpace — Prayer Room</title>
    <style>
      :root {
        --bg: #060b18;
        --card: rgba(255, 255, 255, 0.06);
        --card2: rgba(255, 255, 255, 0.1);
        --stroke: rgba(255, 255, 255, 0.14);
        --text: rgba(255, 255, 255, 0.92);
        --muted: rgba(255, 255, 255, 0.72);
        --primary: rgba(255, 255, 255, 0.92);
        --primaryText: rgba(0, 0, 0, 0.88);
      }

      * { box-sizing: border-box; }
      html, body { height: 100%; margin: 0; background: radial-gradient(1200px 600px at 20% 10%, rgba(65,105,225,0.22), transparent 60%), var(--bg); color: var(--text); font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif; }

      .wrap { max-width: 980px; margin: 0 auto; padding: 28px 18px 40px; }
      .badge { display: inline-block; padding: 6px 12px; border: 1px solid var(--stroke); border-radius: 999px; background: rgba(255,255,255,0.04); color: var(--muted); font-size: 13px; }
      h1 { margin: 14px 0 8px; font-size: 54px; line-height: 1.05; letter-spacing: -0.02em; }
      .lead { margin: 0 0 18px; color: var(--muted); font-size: 18px; line-height: 1.4; }

      .panel { margin-top: 18px; padding: 18px; border: 1px solid var(--stroke); border-radius: 22px; background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03)); box-shadow: 0 14px 60px rgba(0,0,0,0.45); }

      .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-top: 14px; }
      @media (max-width: 860px) { .grid { grid-template-columns: 1fr; } h1 { font-size: 42px; } }

      /* Cards are BUTTONS to avoid the “one big link wraps everything” bug */
      .cardbtn {
        display: block;
        width: 100%;
        text-align: left;
        padding: 18px;
        border-radius: 18px;
        border: 1px solid var(--stroke);
        background: var(--card);
        color: var(--text);
        cursor: pointer;
        user-select: none;
      }
      .cardbtn:hover { background: var(--card2); }
      .cardbtn:active { transform: translateY(1px); }

      .cardbtn.primary {
        background: var(--primary);
        color: var(--primaryText);
        border-color: rgba(255,255,255,0.2);
      }

      .title { font-size: 22px; font-weight: 800; margin: 0 0 6px; }
      .sub { font-size: 14px; color: var(--muted); margin: 0; }
      .primary .sub { color: rgba(0,0,0,0.62); }

      .note { margin-top: 16px; color: var(--muted); font-size: 14px; line-height: 1.45; }
      code { background: rgba(255,255,255,0.07); border: 1px solid rgba(255,255,255,0.12); padding: 2px 8px; border-radius: 10px; }

      .panel2 { margin-top: 18px; padding: 18px; border: 1px solid var(--stroke); border-radius: 22px; background: rgba(255,255,255,0.04); }
      .steps { margin: 10px 0 0; padding-left: 20px; color: var(--muted); }
      .steps li { margin: 6px 0; }
      .hint { margin-top: 10px; color: rgba(255,255,255,0.55); font-size: 13px; }
    </style>
  </head>

  <body>
    <div class="wrap">
      <span class="badge">Start here</span>
      <h1>Prayer Room</h1>
      <p class="lead">
        Choose an option below. <strong>Desktop Web App</strong> is the main “Use Web App” experience.
        <strong>iPhone/iPad</strong> is a separate option with install help.
      </p>

      <div class="panel">
        <div class="grid">
          <button id="open-desktop" class="cardbtn primary" type="button">
            <div class="title">Use Web App (Desktop / Mac / PC)</div>
            <p class="sub">Opens the main Prayer Room web app.</p>
          </button>

          <button id="open-ios" class="cardbtn" type="button">
            <div class="title">iPhone / iPad Version</div>
            <p class="sub">Install help + “Open Prayer Room” button.</p>
          </button>

          <button id="dl-win" class="cardbtn" type="button">
            <div class="title">Download for Windows (PC)</div>
            <p class="sub">Downloads the latest Windows version.</p>
          </button>

          <button id="dl-mac" class="cardbtn" type="button">
            <div class="title">Download for macOS</div>
            <p class="sub">Downloads the latest Mac version.</p>
          </button>
        </div>

        <p class="note">
          The two download buttons always fetch the latest release as long as these filenames stay:
          <code>PrayerRoom-Windows.zip</code> and <code>PrayerRoom-Mac.zip</code>
        </p>
      </div>

      <div class="panel2">
        <span class="badge">Mac users</span>
        <h2 style="margin: 12px 0 8px; font-size: 26px;">If Apple blocks the app</h2>
        <ol class="steps">
          <li>Download <strong>PrayerRoom-Mac.zip</strong></li>
          <li>Double-click it to unzip</li>
          <li>Drag <strong>Prayer Room</strong> into <strong>Applications</strong></li>
          <li>Right-click the app → choose <strong>Open</strong></li>
          <li>Click <strong>Open</strong> again when asked</li>
        </ol>
        <div class="hint">
          If needed: Apple menu → System Settings → Privacy &amp; Security → <strong>Open Anyway</strong>
        </div>
      </div>
    </div>

    <script>
      async function firstAvailable(paths) {
        for (const p of paths) {
          try {
            const r = await fetch(p, { method: "HEAD", cache: "no-store" });
            if (r.ok) return p;
          } catch (_) {}
        }
        return null;
      }

      function go(url) {
        if (!url) return;
        window.location.href = url;
      }

      async function resolveDesktop() {
        // IMPORTANT: do NOT include "./index.html" here (this page is index.html).
        const candidates = [
          "./app/",
          "./app/index.html",
          "./web/",
          "./web/index.html",
          "./pwa/",
          "./pwa/index.html",
          "./desktop/",
          "./desktop/index.html",
          "./PrayerRoom/",
          "./PrayerRoom/index.html",
          "./prayer-room-pwa/",
          "./prayer-room-pwa/index.html",
          "./main/",
          "./main/index.html",
        ];
        return firstAvailable(candidates);
      }

      async function resolveIOS() {
        const candidates = [
          "./iphone-ipad.html",
          "./ios/",
          "./ios/index.html",
          "./iphone/",
          "./iphone/index.html",
          "./ipad/",
          "./ipad/index.html",
        ];
        return firstAvailable(candidates);
      }

      document.getElementById("open-desktop").addEventListener("click", async () => {
        const url = await resolveDesktop();
        if (!url) return alert("Could not find the Desktop Web App path on this deployment.");
        go(url);
      });

      document.getElementById("open-ios").addEventListener("click", async () => {
        const url = await resolveIOS();
        if (!url) return alert("Could not find the iPhone/iPad page on this deployment.");
        go(url);
      });

      document.getElementById("dl-win").addEventListener("click", () => go("./PrayerRoom-Windows.zip"));
      document.getElementById("dl-mac").addEventListener("click", () => go("./PrayerRoom-Mac.zip"));
    </script>
  </body>
</html>

